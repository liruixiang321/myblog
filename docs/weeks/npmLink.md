---
updateTime: "2024-08-08 16:07:01"
desc: "npm link 是 npm（Node Package Manager）的一个功能，它允许你创建一个符号链接（symlink），使得一个包可以作为另一个项目的本地依赖。"
tags: "包管理/工程化"
---

## `npm link` 是什么 ❓

npm link 是 npm（Node Package Manager）的一个功能，它允许你创建一个符号链接（symlink），使得一个包可以作为另一个项目的本地依赖。这在开发多个包或模块时非常有用，特别是当你想要测试一个包在其他项目中的表现，或者多个项目共享同一个包时。

## `npm link` 的作用 ⚙️

1. 本地开发和测试：当你开发一个包，并且想要在其他项目中使用这个包的最新版本时，你可以在包的根目录下运行 npm link。这会在全局 npm 目录中创建一个符号链接。然后，在其他项目中，你可以使用 `npm link <package-name> `来链接到这个全局符号链接，从而将这个包作为依赖安装到项目中。

2. 避免重复安装：在 Monorepo（单仓库多项目）结构中，如果多个项目依赖于同一个包，使用 npm link 可以避免该包在每个项目中重复安装，节省磁盘空间。

3. 简化版本管理：当你在多个项目中使用同一个包，并且想要保持版本一致时，npm link 可以确保所有项目都使用相同的包版本。

## 在 monorepo 中使用 `npm link` ⚙️

在 Monorepo 的上下文中，npm link 可以解决一些依赖管理的问题，比如"幽灵依赖"问题(由于 npm/yarn 存在依赖提升)，即某些依赖没有在 package.json 中声明，但是被其他项目使用。通过 npm link，可以在一定程度上确保所有依赖都是显式链接的，从而避免这类问题。

然而，npm link 也有一些局限性，比如它不支持跨平台（Windows 和 Unix-like 系统之间），并且可能会引入一些复杂性，比如在构建和部署时需要额外的步骤来处理符号链接。因此，一些现代的 Monorepo 工具和工作流可能使用其他方法来管理依赖，比如使用 yarn workspace 或 pnpm。 c
